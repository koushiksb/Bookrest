<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>
Bookrest
  </title>
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no" name="viewport">
  <!-- Extra details for Live View on GitHub Pages -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
  <!-- CSS Files -->
  <link href="https://demos.creative-tim.com/paper-kit-2-pro/assets/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://demos.creative-tim.com/paper-kit-2-pro/assets/css/paper-kit.min.css?v=2.3.0" rel="stylesheet">
  <!-- CSS Just for demo purpose, don't include it in your project -->
  <link href="https://demos.creative-tim.com/paper-kit-2-pro/assets/demo/demo.css" rel="stylesheet">
  <!-- Extra details for Live View on GitHub Pages -->
  <!-- Google Tag Manager -->
</head>

<body class="register-page full-screen sidebar-collapse" data-gr-c-s-loaded="true">
  <div class="wrapper">
    <div class="page-header" style="background-image: url('https://images.pexels.com/photos/590493/pexels-photo-590493.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=750&amp;w=1260');">
      <div class="filter"></div>
      <div class="container">
        <div class="row">
          <div class="col-lg-6 col-md-6 col-sm-7 col-12 ml-auto">
            <div class="info info-horizontal">
              <div class="icon">
                <i class="fa fa-umbrella"></i>
              </div>
              <div class="description">
                <h3> We've got you covered </h3>
                <p>Larger, yet dramatically thinner. More powerful, but remarkably power efficient. Everything you need in a single case.</p>
              </div>
            </div>
            <div class="info info-horizontal">
              <div class="icon">
                <i class="fa fa-map-signs"></i>
              </div>
              <div class="description">
                <h3> Clear Directions </h3>
                <p>Efficiently unleash cross-media information without cross-media value. Quickly maximize timely deliverables for real-time schemas.</p>
              </div>
            </div>
            <div class="info info-horizontal">
              <div class="icon">
                <i class="fa fa-user-secret"></i>
              </div>
              <div class="description">
                <h3> We value your privacy </h3>
                <p>Completely synergize resource taxing relationships via premier niche markets.</p>
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 col-sm-5 col-12 mr-auto">
            <div class="card card-register">
              <h3 class="card-title text-center">Register</h3>
              <div class="social">
                <a href="/users/google" class="btn btn-just-icon btn-google"><i class="fa fa-google"></i></a>
              </div>
              <div class="division">
                <div class="line l"></div>
                <span>or</span>
                <div class="line r"></div>
              </div>
              <form class="register-form" id='login-form' method='post'>
                <input type="email" id='useremail' class="form-control" name='username' placeholder="Email">
                <p id='msgs' style="color:red"></p>
                <a id='next'  class="btn btn-block btn-round" onclick="check()" >Next</a>
                <input type="password" style='display:none' id='userpassword' class="form-control" name='password' placeholder="Password">

                <button class="btn btn-block btn-round" id='log' style='display:none' >Login</button>
              </form>
              <div class="login">
                <p>Doesn't have an account?
                  <a href="/users/signup">Signup</a>.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--   Core JS Files   -->
  <script src="https://demos.creative-tim.com/paper-kit-2-pro/assets/js/core/jquery.min.js" type="text/javascript"></script>
  <script src="https://demos.creative-tim.com/paper-kit-2-pro/assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="https://demos.creative-tim.com/paper-kit-2-pro/assets/js/core/bootstrap.min.js" type="text/javascript"></script>
  <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/validator/12.2.0/validator.min.js'></script>
<script type="text/javascript">
function check(){
  var temp = document.getElementById('useremail').value
  console.log(validator.isEmail(temp));
  if(validator.isEmail(temp) == true){
  $.ajax({
      type:'POST',
      url:'/users/checkemail',
      data:{
        email:document.getElementById('useremail').value,
      },
      success:function(result){
        console.log(result);
        if(result=='0'){

          document.getElementById('next').style.display = 'none'
          document.getElementById('log').style.display = 'block'
          document.getElementById('userpassword').style.display = 'block'
          var k=document.getElementById('login-form').innerHTML +=  "<input type=hidden name='email'" + "value = "+ temp+">"
           document.getElementById('useremail').value = temp
           document.getElementById('useremail').disabled = true

        }
        else{
          document.getElementById('msgs').innerHTML += '<p>Try with google authentication</p> '
          console.log('Email already linked to another account')
        }
        return false
      }
    });
}else{
  document.getElementById('msgs').innerHTML += '<p style="font-size:10px"><b>Invalid username or password</b></p> '
}
}

</script>


</body>
</html>
