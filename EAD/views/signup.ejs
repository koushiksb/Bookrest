<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>
Bookrest
  </title>
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no" name="viewport">
  <!-- Extra details for Live View on GitHub Pages -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
  <!-- CSS Files -->
  <link href="https://demos.creative-tim.com/paper-kit-2-pro/assets/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://demos.creative-tim.com/paper-kit-2-pro/assets/css/paper-kit.min.css?v=2.3.0" rel="stylesheet">
  <!-- CSS Just for demo purpose, don't include it in your project -->
  <link href="https://demos.creative-tim.com/paper-kit-2-pro/assets/demo/demo.css" rel="stylesheet">
  <!-- Extra details for Live View on GitHub Pages -->
  <!-- Google Tag Manager -->
</head>

<body class="register-page full-screen sidebar-collapse" data-gr-c-s-loaded="true">
  <div class="wrapper">
    <div class="page-header" style="background-image: url('https://images.pexels.com/photos/590493/pexels-photo-590493.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=750&amp;w=1260');">
      <div class="filter"></div>
      <div class="container">
        <div class="row">
          <div class="col-lg-6 col-md-6 col-sm-7 col-12 ml-auto">
            <div class="info info-horizontal">
              <div class="icon">
                <i class="fa fa-book"></i>

              </div>
              <div class="description">
                <h3> Find rare books </h3>
                <p>Larger, yet dramatically thinner. More powerful, but remarkably power efficient. Everything you need in a single case.</p>
              </div>
            </div>
            <div class="info info-horizontal">
              <div class="icon">
                <i class="fa fa-money"></i>
              </div>
              <div class="description">
                <h3> Earn money </h3>
                <p>Efficiently unleash cross-media information without cross-media value. Quickly maximize timely deliverables for real-time schemas.</p>
              </div>
            </div>
            <div class="info info-horizontal">
              <div class="icon">
                <i class="fa fa-exchange"></i>
              </div>
              <div class="description">
                <h3> Exchange books</h3>
                <p>Completely synergize resource taxing relationships via premier niche markets.</p>
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 col-sm-5 col-12 mr-auto">
            <div class="card card-register">
              <h3 class="card-title text-center" style='font-family:"Comic Sans MS",cursive,sans-serif;'>Register</h3>
              <div class="social">
                <a href="/users/google" class="btn btn-just-icon btn-google"><i class="fa fa-google"></i></a>
              </div>
              <div class="division">
                <div class="line l"></div>
                <span>or</span>
                <div class="line r"></div>
              </div>
              <form id='signupform' class="register-form" method='post'>
                <input type="email" id = 'useremail' class="form-control" name='email' required placeholder="Email">
                <p id='msgs' style="color:red"></p>
                <a id='next' class="btn btn-block btn-round" onclick="check()" >Next</a>
                <div id="passwords" style='display:none'>
                  <input type="password" id = 'userpassword' class="form-control"  name='password' pattern = '^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^\da-zA-Z]).{6,15}$' title = 'Password must contain One uppercase,One lower case,special character and a number,of min length 6' required  placeholder="Password">
                  <input type="password" id = 'userpassword1' class="form-control" name='password1' required pattern = '^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^\da-zA-Z]).{6,15}$' 'Password must contain One uppercase,One lower case,special character and a number,of min length 6' placeholder="Confirm Password">
                  <p id='msgs2' style="color:red"></p>

                  <a onclick='submitform()' class="btn btn-block btn-round">Register</a>

                </div>

              </form>
              <div class="login">
                <p>Already have an account?
                  <a href="/users/login">Log in</a>.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--   Core JS Files   -->
  <script src="https://demos.creative-tim.com/paper-kit-2-pro/assets/js/core/jquery.min.js" type="text/javascript"></script>
  <script src="https://demos.creative-tim.com/paper-kit-2-pro/assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="https://demos.creative-tim.com/paper-kit-2-pro/assets/js/core/bootstrap.min.js" type="text/javascript"></script>
  <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/validator/12.2.0/validator.min.js'></script>
  <script>
function check(){
  var temp = document.getElementById('useremail').value
  console.log(validator.isEmail(temp));
  if(validator.isEmail(temp) == true){
  $.ajax({
      type:'POST',
      url:'/users/checkemail',
      data:{
        email:document.getElementById('useremail').value,
      },
      success:function(result){
        console.log(result);
        if(result=='1'){

          document.getElementById('next').style.display = 'none'
          document.getElementById('passwords').style.display = 'block'
          var k=document.getElementById('signupform').innerHTML +=  "<input type=hidden name='email'" + "value = "+ temp+">"
           document.getElementById('useremail').value = temp
           document.getElementById('useremail').disabled = true

        }
        else{
          document.getElementById('msgs').innerHTML = '<p style="font-size:10px"><b>Email already linked to another account</b></p> '
          console.log('Email already linked to another account')
        }
        return false
      }
    });
}else{
  document.getElementById('msgs').innerHTML = '<p style="font-size:10px"><b>Enter a Valid Email</b></p> '
}
}
</script>

  <script type="text/javascript" >
  function submitform() {



    // Stop the form from submitting until validation occurs
    var valid = true;

    var email = document.getElementById('useremail').value
    var password = document.getElementById('userpassword').value
    var password1 = document.getElementById('userpassword1').value

    console.log(email)
    // If card number or CVC code are invalid, notify the user
    if (!validator.equals(password,password1)) {
      valid = false;
      console.log('invalid');
document.getElementById('msgs2').innerHTML += '<p style="font-size:10px"><b>Passwords does not match</b></p> '
    }
    if (! password.length>6) {
      valid = false;
    }

    // Submit the form if all went well
    if (valid) {
      document.getElementById('signupform').submit()
    }

}
  </script>
</body>
</html>
